require=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({"complex-math":[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){return obj&&"undefined"!=typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj}Object.defineProperty(exports,"__esModule",{value:!0}),exports.gamma=exports.atanh=exports.atan=exports.asinh=exports.asin=exports.asech=exports.asec=exports.acsch=exports.acsc=exports.acoth=exports.acot=exports.acosh=exports.acos=exports.coth=exports.cot=exports.tanh=exports.tan=exports.sqrt=exports.csch=exports.csc=exports.sinh=exports.sin=exports.sech=exports.sec=exports.pow=exports.log10=exports.log2=exports.log=exports.mod=exports.divide=exports.abs=exports.norm=exports.nint=exports.ln=exports.frac=exports.floor=exports.cosh=exports.cos=exports.exp=exports.conj=exports.ceil=exports.arg=exports.negate=exports.multiply=exports.subtract=exports.add=exports.imaginary=exports.real=exports.SQRT2=exports.SQRT1_2=exports.PI=exports.LOG10E=exports.LOG2E=exports.LN2=exports.LN10=exports.I=exports.E=void 0;var _complex=require("./complex.js"),_complex2=_interopRequireDefault(_complex),toComplex=function toComplex(u){if(u instanceof _complex2.default)return u;if(u instanceof Number)return new _complex2.default(u.valueOf);if("number"==typeof u)return new _complex2.default(u);if("object"===("undefined"==typeof u?"undefined":_typeof(u))&&u.hasOwnProperty("real")&&"number"==typeof u.real&&u.hasOwnProperty("imaginary")&&"number"==typeof u.imaginary)return new _complex2.default(u.real,u.imaginary);throw new TypeError("Expected numeric type")},E=exports.E=new _complex2.default(Math.E),I=exports.I=new _complex2.default(0,1),LN10=exports.LN10=new _complex2.default(Math.LN10),LN2=exports.LN2=new _complex2.default(Math.LN2),LOG2E=exports.LOG2E=new _complex2.default(Math.LOG2E),LOG10E=exports.LOG10E=new _complex2.default(Math.LOG10E),PI=exports.PI=new _complex2.default(Math.PI),SQRT1_2=exports.SQRT1_2=new _complex2.default(Math.SQRT1_2),SQRT2=exports.SQRT2=new _complex2.default(Math.SQRT2),real=exports.real=function real(u){return new _complex2.default(toComplex(u).real)},imaginary=exports.imaginary=function imaginary(u){return new _complex2.default(toComplex(u).imaginary)},add=exports.add=function add(u,v){return new _complex2.default(real(u).real+real(v).real,imaginary(u).real+imaginary(v).real)},subtract=exports.subtract=function subtract(u,v){return new _complex2.default(real(u).real-real(v).real,imaginary(u).real-imaginary(v).real)},multiply=exports.multiply=function multiply(u,v){var complexU=toComplex(u),complexV=toComplex(v);return new _complex2.default(complexU.real*complexV.real-complexU.imaginary*complexV.imaginary,complexU.real*complexV.imaginary+complexU.imaginary*complexV.real)},negate=exports.negate=function negate(u){var complexU=toComplex(u);return new _complex2.default(-complexU.real,-complexU.imaginary)},arg=exports.arg=function arg(u){return new _complex2.default(Math.atan2(imaginary(u).real,real(u).real))},ceil=exports.ceil=function ceil(u){return new _complex2.default(Math.ceil(real(u).real),Math.ceil(imaginary(u).real))},conj=exports.conj=function conj(u){return new _complex2.default(real(u).real,-imaginary(u).real)},exp=exports.exp=function exp(u){var complexU=toComplex(u),newAbs=Math.exp(complexU.real),newArg=complexU.imaginary;return new _complex2.default(newAbs*Math.cos(newArg),newAbs*Math.sin(newArg))},cos=exports.cos=function cos(u){var iu=multiply(I,u);return divide(add(exp(iu),exp(negate(iu))),2)},cosh=exports.cosh=function cosh(u){return divide(add(exp(u),exp(negate(u))),2)},floor=exports.floor=function floor(u){return new _complex2.default(Math.floor(real(u).real),Math.floor(imaginary(u).real))},realFrac=function realFrac(n){return n>=0?n-Math.floor(n):n-Math.ceil(n)},frac=exports.frac=function frac(u){var complexU=toComplex(u);return new _complex2.default(realFrac(complexU.real),realFrac(complexU.imaginary))},ln=exports.ln=function ln(u){return new _complex2.default(Math.log(abs(u).real),arg(u).real)},nint=exports.nint=function nint(u){return floor(add(u,new _complex2.default(.5,.5)))},norm=exports.norm=function norm(u){return new _complex2.default(real(u).real*real(u).real+imaginary(u).real*imaginary(u).real)},abs=exports.abs=function abs(u){return new _complex2.default(Math.sqrt(norm(u).real))},divide=exports.divide=function divide(u,v){var complexU=toComplex(u),complexV=toComplex(v),normV=norm(v).real;return new _complex2.default((complexU.real*complexV.real+complexU.imaginary*complexV.imaginary)/normV,(complexU.imaginary*complexV.real-complexU.real*complexV.imaginary)/normV)},mod=exports.mod=function mod(u,v){return subtract(u,multiply(v,floor(divide(u,v))))},log=exports.log=function log(base,u){return divide(ln(u),ln(base))},log2=exports.log2=function log2(u){return divide(ln(u),Math.LN2)},log10=exports.log10=function log10(u){return divide(ln(u),Math.LN10)},pow=exports.pow=function pow(base,power){return exp(multiply(power,ln(base)))},sec=exports.sec=function sec(u){return divide(1,cos(u))},sech=exports.sech=function sech(u){return divide(1,cosh(u))},sin=exports.sin=function sin(u){var iu=multiply(I,u);return divide(subtract(exp(iu),exp(negate(iu))),new _complex2.default(0,2))},sinh=exports.sinh=function sinh(u){return divide(subtract(exp(u),exp(negate(u))),2)},csc=exports.csc=function csc(u){return divide(1,sin(u))},csch=exports.csch=function csch(u){return divide(1,sinh(u))},sqrt=exports.sqrt=function sqrt(u){var complexU=toComplex(u),absU=abs(u).real;return new _complex2.default(Math.sqrt((complexU.real+absU)/2),Math.sign(complexU.imaginary)*Math.sqrt((-complexU.real+absU)/2))},tan=exports.tan=function tan(u){var exp_2iu=exp(multiply(new _complex2.default(0,2),u));return divide(subtract(exp_2iu,1),multiply(I,add(exp_2iu,1)))},tanh=exports.tanh=function tanh(u){var exp_u=exp(u),exp_negate_u=exp(negate(u));return divide(subtract(exp_u,exp_negate_u),add(exp_u,exp_negate_u))},cot=exports.cot=function cot(u){return divide(1,tan(u))},coth=exports.coth=function coth(u){return divide(1,tanh(u))},acos=exports.acos=function acos(u){return add(Math.PI/2,multiply(I,ln(add(multiply(I,u),sqrt(subtract(1,multiply(u,u)))))))},acosh=exports.acosh=function acosh(u){return ln(add(u,multiply(sqrt(add(u,1)),sqrt(subtract(u,1)))))},acot=exports.acot=function acot(u){return multiply(divide(I,2),subtract(ln(divide(subtract(u,I),u)),ln(divide(add(u,I),u))))},acoth=exports.acoth=function acoth(u){var reciprocal=divide(1,u);return divide(subtract(ln(add(1,reciprocal)),ln(subtract(1,reciprocal))),2)},acsc=exports.acsc=function acsc(u){return multiply(new _complex2.default(0,-1),ln(add(sqrt(subtract(1,divide(1,multiply(u,u)))),divide(I,u))))},acsch=exports.acsch=function acsch(u){return add(new _complex2.default(0,-Math.PI/2),multiply(I,acos(divide(I,u))))},asec=exports.asec=function asec(u){return add(new _complex2.default(Math.PI/2),multiply(I,ln(add(sqrt(subtract(1,divide(1,multiply(u,u)))),divide(I,u)))))},asech=exports.asech=function asech(u){var reciprocal=divide(1,u);return ln(add(multiply(sqrt(subtract(reciprocal,1)),sqrt(add(reciprocal,1))),reciprocal))},asin=exports.asin=function asin(u){return multiply(new _complex2.default(0,-1),ln(add(multiply(I,u),sqrt(subtract(1,multiply(u,u))))))},asinh=exports.asinh=function asinh(u){return ln(add(u,sqrt(add(multiply(u,u),1))))},atan=exports.atan=function atan(u){var iu=multiply(I,u);return multiply(divide(I,2),subtract(ln(subtract(1,iu)),ln(add(1,iu))))},atanh=exports.atanh=function atanh(u){return divide(subtract(ln(add(1,u)),ln(subtract(1,u))),2)},factorials=[1,1,2,6,24,120,720,5040,40320,362880,3628800,39916800,479001600,6227020800,87178291200,1307674368e3,20922789888e3,355687428096e3,6402373705728e3,0x1b02b9306890000,243290200817664e4,5109094217170944e4,0x3ceea4c2b3e0d80000,2.585201673888498e22,6.204484017332394e23,1.5511210043330986e25,4.0329146112660565e26,1.0888869450418352e28,3.0488834461171387e29,8.841761993739702e30,2.6525285981219107e32,8.222838654177922e33,2.631308369336935e35,8.683317618811886e36,2.9523279903960416e38,1.0333147966386145e40,3.7199332678990125e41,1.3763753091226346e43,5.230226174666011e44,2.0397882081197444e46,8.159152832478977e47,3.345252661316381e49,1.40500611775288e51,6.041526306337383e52,2.658271574788449e54,1.1962222086548019e56,5.502622159812089e57,2.5862324151116818e59,1.2413915592536073e61,6.082818640342675e62,3.0414093201713376e64,1.5511187532873822e66,8.065817517094388e67,4.2748832840600255e69,2.308436973392414e71,1.2696403353658276e73,7.109985878048635e74,4.0526919504877214e76,2.3505613312828785e78,1.3868311854568984e80,8.32098711274139e81,5.075802138772248e83,3.146997326038794e85,1.98260831540444e87,1.2688693218588417e89,8.247650592082472e90,5.443449390774431e92,3.647111091818868e94,2.4800355424368305e96,1.711224524281413e98,1.1978571669969892e100,8.504785885678623e101,6.1234458376886085e103,4.4701154615126844e105,3.307885441519386e107,2.48091408113954e109,1.8854947016660504e111,1.4518309202828587e113,1.1324281178206297e115,8.946182130782976e116,7.156945704626381e118,5.797126020747368e120,4.753643337012842e122,3.945523969720659e124,3.314240134565353e126,2.81710411438055e128,2.4227095383672734e130,2.107757298379528e132,1.8548264225739844e134,1.650795516090846e136,1.4857159644817615e138,1.352001527678403e140,1.2438414054641308e142,1.1567725070816416e144,1.087366156656743e146,1.032997848823906e148,9.916779348709496e149,9.619275968248212e151,9.426890448883248e153,9.332621544394415e155,9.332621544394415e157,9.42594775983836e159,9.614466715035127e161,9.90290071648618e163,1.0299016745145628e166,1.081396758240291e168,1.1462805637347084e170,1.226520203196138e172,1.324641819451829e174,1.4438595832024937e176,1.588245541522743e178,1.7629525510902446e180,1.974506857221074e182,2.2311927486598138e184,2.5435597334721877e186,2.925093693493016e188,3.393108684451898e190,3.969937160808721e192,4.684525849754291e194,5.574585761207606e196,6.689502913449127e198,8.094298525273444e200,9.875044200833601e202,1.214630436702533e205,1.506141741511141e207,1.882677176888926e209,2.372173242880047e211,3.0126600184576594e213,3.856204823625804e215,4.974504222477287e217,6.466855489220474e219,8.47158069087882e221,1.1182486511960043e224,1.4872707060906857e226,1.9929427461615188e228,2.6904727073180504e230,3.659042881952549e232,5.012888748274992e234,6.917786472619489e236,9.615723196941089e238,1.3462012475717526e241,1.898143759076171e243,2.695364137888163e245,3.854370717180073e247,5.5502938327393044e249,8.047926057471992e251,1.1749972043909107e254,1.727245890454639e256,2.5563239178728654e258,3.80892263763057e260,5.713383956445855e262,8.62720977423324e264,1.3113358856834524e267,2.0063439050956823e269,3.0897696138473508e271,4.789142901463394e273,7.471062926282894e275,1.1729568794264145e278,1.853271869493735e280,2.9467022724950384e282,4.7147236359920616e284,7.590705053947219e286,1.2296942187394494e289,2.0044015765453026e291,3.287218585534296e293,5.423910666131589e295,9.003691705778438e297,1.503616514864999e300,2.5260757449731984e302,4.269068009004705e304,7.257415615307999e306],lanczosG=6.02468004077673,lanczosGMinusHalf=5.52468004077673,lanczosNumeratorCoefficients=[23531376880.41076,42919803642.6491,35711959237.35567,17921034426.03721,6039542586.352028,1439720407.3117216,248874557.86205417,31426415.585400194,2876370.6289353725,186056.26539522348,8071.672002365816,210.82427775157936,2.5066282746310002],lanczosDenominatorCoefficients=[0,39916800,120543840,150917976,105258076,45995730,13339535,2637558,357423,32670,1925,66,1],lanczosSum=function lanczosSum(u){var num=0,denom=0,n=lanczosNumeratorCoefficients.length;if(u.real<5)for(var i=n;--i>=0;)num=add(lanczosNumeratorCoefficients[i],multiply(num,u)),denom=add(lanczosDenominatorCoefficients[i],multiply(denom,u));else for(var i=0;n>i;++i)num=add(lanczosNumeratorCoefficients[i],divide(num,u)),denom=add(lanczosDenominatorCoefficients[i],divide(denom,u));return divide(num,denom)},gamma=exports.gamma=function gamma(u){var complexU=toComplex(u),realPart=complexU.real;if(0===complexU.imaginary&&realPart===Math.floor(realPart))return 0>realPart?new _complex2.default(NaN):0===realPart?new _complex2.default(Number.POSITIVE_INFINITY):realPart<factorials.length-1?new _complex2.default(factorials[realPart-1]):new _complex2.default(Number.POSITIVE_INFINITY);if(0>realPart){var sinPiu=sin(multiply(PI,u));return divide(PI,multiply(sinPiu,gamma(subtract(1,u))))}var y=add(complexU,lanczosGMinusHalf);return divide(multiply(pow(y,subtract(complexU,.5)),lanczosSum(complexU)),exp(y))}},{"./complex.js":"complex"}],complex:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _class=function _class(){var real=arguments.length<=0||void 0===arguments[0]?0:arguments[0],imaginary=arguments.length<=1||void 0===arguments[1]?0:arguments[1];_classCallCheck(this,_class),this.real=real,this.imaginary=imaginary};exports.default=_class},{}],expression:[function(require,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_KnownUnaryFunctions;Object.defineProperty(exports,"__esModule",{value:!0});var _complex=require("./complex.js"),_complex2=_interopRequireDefault(_complex),_complexMath=require("./complex-math.js"),ComplexMath=_interopRequireWildcard(_complexMath),KnownCharacters={openParenthesis:"(",closeParenthesis:")",openFloor:"⌊",closeFloor:"⌋",openCeiling:"⌈",closeCeiling:"⌉",openBracket:"[",closeBracket:"]",blackLetterCapitalI:"ℑ",blackLetterCapitalR:"ℜ",comma:",",invisibleSeparator:"⁣",plus:"+",invisiblePlus:"⁤",minus:"-",minusSign:"−",times:"*",dotOperator:"⋅",multiplicationSign:"×",invisibleTimes:"⁢",divide:"/",divisionSign:"÷",fractionSlash:"⁄",divisionSlash:"∕",greekCapitalLetterGamma:"Γ"},doParenthesesMatch=function doParenthesesMatch(openTerminal,closeTerminal){return openTerminal===KnownCharacters.openParenthesis&&closeTerminal===KnownCharacters.closeParenthesis||openTerminal===KnownCharacters.openFloor&&closeTerminal===KnownCharacters.closeFloor||openTerminal===KnownCharacters.openCeiling&&closeTerminal===KnownCharacters.closeCeiling||openTerminal===KnownCharacters.openBracket&&closeTerminal===KnownCharacters.closeBracket},TokenType={space:1,symbol:2,number:3,openParenthesis:4,closeParenthesis:5,comma:6,plus:7,minus:8,times:9,invisibleTimes:10,divide:11,unaryFunction:12,binaryFunction:13},isTokenOperator=function isTokenOperator(tokenType){return tokenType===TokenType.plus||tokenType===TokenType.minus||tokenType===TokenType.times||tokenType===TokenType.invisibleTimes||tokenType===TokenType.divide},isTokenFunction=function isTokenFunction(tokenType){return tokenType===TokenType.unaryFunction||tokenType===TokenType.binaryFunction},isTokenValue=function isTokenValue(tokenType){return tokenType===TokenType.symbol||tokenType===TokenType.number},isTokenScopeEnding=function isTokenScopeEnding(tokenType){return tokenType===TokenType.closeParenthesis||tokenType===TokenType.comma},isTokenUnaryForcing=function isTokenUnaryForcing(tokenType){return tokenType===TokenType.openParenthesis||tokenType===TokenType.comma||tokenType===TokenType.plus||tokenType===TokenType.minus||tokenType===TokenType.times||tokenType===TokenType.divide},tokenImpliesMultiplication=function tokenImpliesMultiplication(tokenType){return tokenType===TokenType.openParenthesis||tokenType===TokenType.number||tokenType===TokenType.symbol||tokenType===TokenType.unaryFunction||tokenType===TokenType.binaryFunction},Token=function Token(tokenType,terminal){_classCallCheck(this,Token),this.tokenType=tokenType,this.terminal=terminal},isLeftTokenLowerOrEqualPrecedence=function isLeftTokenLowerOrEqualPrecedence(leftToken,rightToken){return rightToken===TokenType.invisibleTimes||!isTokenOperator(leftToken)&&!isTokenOperator(rightToken)||isTokenOperator(leftToken)&&leftToken!==TokenType.invisibleTimes&&!isTokenOperator(rightToken)||rightToken===TokenType.times||rightToken===TokenType.divide||leftToken===TokenType.plus||leftToken===TokenType.minus},operatorToBinaryFunction=function operatorToBinaryFunction(token){if(!isTokenOperator(token.tokenType))throw new Error("Assertion failed: expected operator token");return new Token(TokenType.binaryFunction,token.terminal)},ExpressionSyntaxError=function(_Error){function ExpressionSyntaxError(message){_classCallCheck(this,ExpressionSyntaxError);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(ExpressionSyntaxError).call(this,message));return _this.message=message,_this}return _inherits(ExpressionSyntaxError,_Error),ExpressionSyntaxError}(Error),convertToReversePolishNotation=function convertToReversePolishNotation(tokens){var ops=[],rpn=[];for(tokens.forEach(function(token,index){if(isTokenValue(token.tokenType))rpn.push(token);else if(token.tokenType===TokenType.openParenthesis)ops.unshift(token);else if(isTokenScopeEnding(token.tokenType)){for(;0!==ops.length&&ops[0].tokenType!==TokenType.openParenthesis;)isTokenOperator(ops[0].tokenType)?rpn.push(operatorToBinaryFunction(ops[0])):rpn.push(ops[0]),ops.shift();if(0===ops.length||ops[0].tokenType!==TokenType.openParenthesis)throw new ExpressionSyntaxError(token.tokenType===TokenType.comma?"Misplaced comma":token.terminal===KnownCharacters.closeParenthesis?"Too many close parentheses":"Mismatched circumfix operator");if(0!==ops.length&&token.tokenType===TokenType.closeParenthesis){if(!doParenthesesMatch(ops[0].terminal,token.terminal))throw new ExpressionSyntaxError("Mismatched circumfix operator");ops.shift(),0!==ops.length&&isTokenFunction(ops[0].tokenType)&&(rpn.push(ops[0]),ops.shift())}}else if(isTokenOperator(token.tokenType)){var nextIndex=index+1;if(nextIndex>=tokens.length)throw new ExpressionSyntaxError("Missing right hand operand");for(;0!==ops.length&&isLeftTokenLowerOrEqualPrecedence(token.tokenType,ops[0].tokenType);){if(isTokenOperator(ops[0].tokenType))rpn.push(operatorToBinaryFunction(ops[0]));else{if(!isTokenFunction(ops[0].tokenType))break;rpn.push(ops[0])}ops.shift()}ops.unshift(token)}else if(token.tokenType===TokenType.unaryFunction)ops.unshift(token);else{if(token.tokenType!==TokenType.binaryFunction)throw new Error("Assertion failed: unknown token type");var nextIndex=index+1;if(nextIndex>=tokens.length||tokens[nextIndex].tokenType!==TokenType.openParenthesis)throw new ExpressionSyntaxError("Binary functions must use parentheses");ops.unshift(token)}});0!==ops.length;){if(ops[0].tokenType===TokenType.openParenthesis)throw new ExpressionSyntaxError(ops[0].terminal===KnownCharacters.openParenthesis?"Too many open parentheses":"Mismatched circumfix operator");isTokenOperator(ops[0].tokenType)?rpn.push(operatorToBinaryFunction(ops[0])):rpn.push(ops[0]),ops.shift()}if(0===rpn.length)throw new ExpressionSyntaxError("Empty expression");return rpn},KnownConstants={e:ComplexMath.E,i:ComplexMath.I,pi:ComplexMath.PI},isKnownConstant=function isKnownConstant(terminal){return KnownConstants.hasOwnProperty(terminal)},numberFromTerminal=function numberFromTerminal(terminal){return isKnownConstant(terminal)?KnownConstants[terminal]:new _complex2.default(Number.parseFloat(terminal))},KnownUnaryFunctions=(_KnownUnaryFunctions={abs:ComplexMath.abs,arccos:ComplexMath.acos,arccosh:ComplexMath.acosh,arccot:ComplexMath.acot,arccoth:ComplexMath.acoth,arccsc:ComplexMath.acsc,arccsch:ComplexMath.acsch,arcsec:ComplexMath.asec,arcsech:ComplexMath.asech,arcsin:ComplexMath.asin,arcsinh:ComplexMath.asinh,arctan:ComplexMath.atan,arctanh:ComplexMath.atanh,arg:ComplexMath.arg,ceil:ComplexMath.ceil,conj:ComplexMath.conj,cos:ComplexMath.cos,cosh:ComplexMath.cosh,cot:ComplexMath.cot,coth:ComplexMath.coth,csc:ComplexMath.csc,csch:ComplexMath.csch,exp:ComplexMath.exp,floor:ComplexMath.floor,frac:ComplexMath.frac,gamma:ComplexMath.gamma},_defineProperty(_KnownUnaryFunctions,KnownConstants.greekCapitalLetterGamma,ComplexMath.gamma),_defineProperty(_KnownUnaryFunctions,"imag",ComplexMath.imag),_defineProperty(_KnownUnaryFunctions,KnownConstants.blackLetterCapitalI,ComplexMath.imag),_defineProperty(_KnownUnaryFunctions,"log10",ComplexMath.log10),_defineProperty(_KnownUnaryFunctions,"lg",ComplexMath.log2),_defineProperty(_KnownUnaryFunctions,"ln",ComplexMath.ln),_defineProperty(_KnownUnaryFunctions,"-",ComplexMath.negate),_defineProperty(_KnownUnaryFunctions,"nint",ComplexMath.nint),_defineProperty(_KnownUnaryFunctions,"norm",ComplexMath.norm),_defineProperty(_KnownUnaryFunctions,"real",ComplexMath.real),_defineProperty(_KnownUnaryFunctions,KnownConstants.blackLetterCapitalR,ComplexMath.real),_defineProperty(_KnownUnaryFunctions,"sec",ComplexMath.sec),_defineProperty(_KnownUnaryFunctions,"sech",ComplexMath.sech),_defineProperty(_KnownUnaryFunctions,"sin",ComplexMath.sin),_defineProperty(_KnownUnaryFunctions,"sinh",ComplexMath.sinh),_defineProperty(_KnownUnaryFunctions,"sqrt",ComplexMath.sqrt),_defineProperty(_KnownUnaryFunctions,"tan",ComplexMath.tan),_defineProperty(_KnownUnaryFunctions,"tanh",ComplexMath.tanh),_KnownUnaryFunctions),isKnownUnaryFunction=function isKnownUnaryFunction(terminal){return KnownUnaryFunctions.hasOwnProperty(terminal)},unaryFunctionFromTerminal=function unaryFunctionFromTerminal(terminal){if(isKnownUnaryFunction(terminal))return KnownUnaryFunctions[terminal];throw new Error("Assertion failed: attempting to create unknown unary function")},KnownBinaryFunctions={log:ComplexMath.log,mod:ComplexMath.mod,pow:ComplexMath.pow,"+":ComplexMath.add,"-":ComplexMath.subtract,"*":ComplexMath.multiply,"/":ComplexMath.divide},isKnownBinaryFunction=function isKnownBinaryFunction(terminal){return KnownBinaryFunctions.hasOwnProperty(terminal)},binaryFunctionFromTerminal=function binaryFunctionFromTerminal(terminal){if(isKnownBinaryFunction(terminal))return KnownBinaryFunctions[terminal];throw new Error("Assertion failed: attempting to create unknown binary function")},processHiddenElements=function processHiddenElements(tokens){var processedTokens=[];return tokens.forEach(function(token,index){var nextIndex=index+1,isLastToken=nextIndex===tokens.length;switch(token.tokenType){case TokenType.space:break;case TokenType.closeParenthesis:case TokenType.number:case TokenType.symbol:processedTokens.push(token),!isLastToken&&tokenImpliesMultiplication(tokens[nextIndex].tokenType)&&processedTokens.push(new Token(TokenType.invisibleTimes,"*"));break;case TokenType.comma:if(0===processedTokens.length||processedTokens[processedTokens.length-1].tokenType===TokenType.openParenthesis||!isLastToken&&tokens[nextIndex].tokenType===TokenType.closeParenthesis)throw new ExpressionSyntaxError("Misplaced comma");processedTokens.push(token);break;case TokenType.plus:case TokenType.minus:0===processedTokens.length||isTokenUnaryForcing(processedTokens[processedTokens.length-1].tokenType)?token.tokenType===TokenType.minus&&processedTokens.push(new Token(TokenType.unaryFunction,token.terminal)):processedTokens.push(token);break;case TokenType.openParenthesis:case TokenType.times:case TokenType.invisibleTimes:case TokenType.divide:case TokenType.unaryFunction:case TokenType.binaryFunction:processedTokens.push(token)}}),processedTokens},isAlphabeticCharacter=function isAlphabeticCharacter(c){return/[A-Za-z]/.test(c)},isDigitCharacter=function isDigitCharacter(c){return/\d/.test(c)},isNumericCharacter=function isNumericCharacter(c){return/\d|\./.test(c)},isSpaceCharacter=function isSpaceCharacter(c){return/\s/.test(c)},isHighSurrogateCharacter=function isHighSurrogateCharacter(c){return c.charCodeAt(0)>=55296&&c.charCodeAt(0)<=56319},isLowSurrogateCharacter=function isLowSurrogateCharacter(c){return c.charCodeAt(0)>=56320&&c.charCodeAt(0)<=57343},findSymbolEndIndex=function findSymbolEndIndex(startIndex,expression){var startCharacter=expression[startIndex],endIndex=void 0;if(isLowSurrogateCharacter(startCharacter))throw new ExpressionSyntaxError("Encountered low surrogate without a corresponding high surrogate");if(isHighSurrogateCharacter(startCharacter)){if(endIndex=startIndex+2,endIndex>expression.length||!isLowSurrogateCharacter(expression[startIndex+1]))throw new ExpressionSyntaxError("Encountered high surrogate without a corresponding low surrogate")}else if(isAlphabeticCharacter(startCharacter)){var substring=expression.substring(startIndex),relativeEndIndex=substring.search(/[^A-Za-z]|$/);-1!==relativeEndIndex&&isDigitCharacter(expression[relativeEndIndex])&&(substring=substring.substring(relativeEndIndex),relativeEndIndex+=substring.search(/\D/)),endIndex=-1!==relativeEndIndex?relativeEndIndex+startIndex:startIndex+1}else endIndex=startIndex+1;return endIndex},tokenize=function tokenize(expression){for(var tokens=[],startIndex=0;startIndex!==expression.length;){var character=expression[startIndex];if("\x00"===character)break;if(isSpaceCharacter(character))tokens.push(new Token(TokenType.space," ")),++startIndex;else if(character===KnownCharacters.openParenthesis)tokens.push(new Token(TokenType.openParenthesis,"(")),++startIndex;else if(character===KnownCharacters.openFloor)tokens.push(new Token(TokenType.unaryFunction,"floor")),tokens.push(new Token(TokenType.openParenthesis,KnownCharacters.openFloor)),++startIndex;else if(character===KnownCharacters.openCeiling)tokens.push(new Token(TokenType.unaryFunction,"ceil")),tokens.push(new Token(TokenType.openParenthesis,KnownCharacters.openCeiling)),++startIndex;else if(character===KnownCharacters.openBracket)tokens.push(new Token(TokenType.unaryFunction,"nint")),tokens.push(new Token(TokenType.openParenthesis,KnownCharacters.openBracket)),++startIndex;else if(character===KnownCharacters.closeParenthesis||character===KnownCharacters.closeFloor||character===KnownCharacters.closeCeiling||character===KnownCharacters.closeBracket)tokens.push(new Token(TokenType.closeParenthesis,character)),++startIndex;else if(character===KnownCharacters.comma||character===KnownCharacters.invisibleSeparator)tokens.push(new Token(TokenType.comma,",")),++startIndex;else if(isNumericCharacter(character)){var substring=expression.substring(startIndex),terminal=substring.match(/^\d+(?:\.\d+)?/);tokens.push(new Token(TokenType.number,terminal[0])),startIndex+=terminal[0].length}else if(character===KnownCharacters.plus||character===KnownCharacters.invisiblePlus)tokens.push(new Token(TokenType.plus,"+")),++startIndex;else if(character===KnownCharacters.minus||character===KnownCharacters.minusSign)tokens.push(new Token(TokenType.minus,"-")),++startIndex;else if(character===KnownCharacters.times||character===KnownCharacters.dotOperator||character===KnownCharacters.multiplicationSign)tokens.push(new Token(TokenType.times,"*")),++startIndex;else if(character===KnownCharacters.invisibleTimes)tokens.push(new Token(TokenType.invisibleTimes,"*")),++startIndex;else if(character===KnownCharacters.divide||character===KnownCharacters.divisionSign||character===KnownCharacters.fractionSlash||character===KnownCharacters.divisionSlash)tokens.push(new Token(TokenType.divide,"/")),++startIndex;else{var endIndex=findSymbolEndIndex(startIndex,expression),terminal=expression.substring(startIndex,endIndex),tokenType=void 0;tokenType=isKnownConstant(terminal)?TokenType.number:isKnownUnaryFunction(terminal)?TokenType.unaryFunction:isKnownBinaryFunction(terminal)?TokenType.binaryFunction:TokenType.symbol,tokens.push(new Token(tokenType,terminal)),startIndex=endIndex}}return tokens},NumberPhrase=function(){function NumberPhrase(value){_classCallCheck(this,NumberPhrase),this.value=value}return _createClass(NumberPhrase,[{key:"evaluate",value:function evaluate(){return this.value}}]),NumberPhrase}(),ExpressionEvaluationError=function(_Error2){function ExpressionEvaluationError(message){_classCallCheck(this,ExpressionEvaluationError);var _this2=_possibleConstructorReturn(this,Object.getPrototypeOf(ExpressionEvaluationError).call(this,message));return _this2.message=message,_this2}return _inherits(ExpressionEvaluationError,_Error2),ExpressionEvaluationError}(Error),VariablePhrase=function(){function VariablePhrase(symbol){_classCallCheck(this,VariablePhrase),this.symbol=symbol}return _createClass(VariablePhrase,[{key:"evaluate",value:function evaluate(){var symbols=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(!symbols.hasOwnProperty(this.symbol))throw new ExpressionEvaluationError("Variable "+this.symbol+" does not have a defined value");return symbols[this.symbol]}}]),VariablePhrase}(),FunctionPhrase=function(){function FunctionPhrase(evalFunction,children){if(_classCallCheck(this,FunctionPhrase),children.length!==evalFunction.length)throw new ExpressionSyntaxError("Improper number of arguments");this.evalFunction=evalFunction,this.children=children}return _createClass(FunctionPhrase,[{key:"evaluate",value:function evaluate(){var symbols=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.evalFunction.apply(null,this.children.map(function(phrase){return phrase.evaluate(symbols)}))}}]),FunctionPhrase}(),buildParseTree=function buildParseTree(tokens){var stack=[];if(tokens.forEach(function(token){switch(token.tokenType){case TokenType.number:stack.push(new NumberPhrase(numberFromTerminal(token.terminal)));break;case TokenType.symbol:stack.push(new VariablePhrase(token.terminal));break;case TokenType.unaryFunction:if(0===stack.length)throw new ExpressionSyntaxError("Too few arguments for function "+token.terminal);stack.push(new FunctionPhrase(unaryFunctionFromTerminal(token.terminal),[stack.pop()]));break;case TokenType.binaryFunction:if(stack.length<2)throw new ExpressionSyntaxError("Too few arguments for function "+token.terminal);var children=[stack.pop(),stack.pop()].reverse();stack.push(new FunctionPhrase(binaryFunctionFromTerminal(token.terminal),children));break;default:throw new Error("Assertion failed: unexpected token type");
}}),0===stack.length)throw new ExpressionSyntaxError("Empty expression");if(1!==stack.length)throw new ExpressionSyntaxError("Unexpected expression");return stack[0]},_class=function(){function _class(expression){_classCallCheck(this,_class),this.phrase=buildParseTree(convertToReversePolishNotation(processHiddenElements(tokenize(expression))))}return _createClass(_class,[{key:"evaluate",value:function evaluate(){var symbols=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.phrase.evaluate(symbols)}}]),_class}();exports.default=_class},{"./complex-math.js":"complex-math","./complex.js":"complex"}]},{},[]);